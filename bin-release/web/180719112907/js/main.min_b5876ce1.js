var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(r){n=[6,r],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},Scenes=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.onComplete,t),t}return __extends(t,e),t}(eui.Component);__reflect(Scenes.prototype,"Scenes");var Button_Model=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/game/buttonModel.exml",t.once(eui.UIEvent.CREATION_COMPLETE,t.onComplete,t),t}return __extends(t,e),t.prototype.onComplete=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtuClick,this)},t.prototype.onBtuClick=function(e){},t}(eui.Button);__reflect(Button_Model.prototype,"Button_Model");var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=n.sent(),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return t=n.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),this.stage.removeChild(e),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.onConfigComplete=function(){},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var r=new eui.Theme("resource/default.thm.json",e.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){var e=new UI_Panel;this.addChild(e),ScenesManger.Instance.rootScenes=e},t}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,r){function o(e){t.call(r,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(r))}var s=this;"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(r,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(r,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var About_Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/game/AboutPanel.exml",t}return __extends(t,e),t.prototype.onComplete=function(){this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){ScenesManger.Instance.OnGoHome()},this)},t}(Scenes);__reflect(About_Panel.prototype,"About_Panel");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.createView=function(){var e=this;RES.getResByUrl("resource/panel/loading/londing2.png,",function(t,n){e.Bimage=new egret.Bitmap,e.Bimage.texture=t,e.Bimage.anchorOffsetX=e.Bimage.width/2,e.Bimage.anchorOffsetY=e.Bimage.height/2,e.Bimage.x=e.width/2,e.Bimage.y=e.height/2,e.addChild(e.Bimage),e.textField=new egret.TextField,e.addChild(e.textField),e.textField.width=e.Bimage.width,e.textField.height=e.Bimage.height,e.textField.anchorOffsetX=e.textField.width/2,e.textField.anchorOffsetY=e.textField.height/2,e.textField.x=e.width/2,e.textField.y=e.height/2,e.textField.textAlign=egret.HorizontalAlign.CENTER,e.textField.verticalAlign=egret.VerticalAlign.MIDDLE,e.textField.size=16},this,RES.ResourceItem.TYPE_IMAGE)},t.prototype.onAddToStage=function(){this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.addEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)},t.prototype.onRemove=function(){this.hasEventListener(egret.Event.ENTER_FRAME)&&this.removeEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)},t.prototype.onFrame=function(){this.Bimage&&(this.Bimage.rotation+=5)},t.prototype.onProgress=function(e,t){this.textField&&(this.textField.text="Loading..."+e+"/"+t)},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Goods_Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/game/GoodsPanel.exml",t}return __extends(t,e),t.prototype.onComplete=function(){var e=[{url:"resource/panel/heros_goods/goods01.png",name:"魔法石",introduce:"法力加成 +3"},{url:"resource/panel/heros_goods/goods02.png",name:"诅咒娃娃",introduce:"智力加成 +3"},{url:"resource/panel/heros_goods/goods03.png",name:"万圣戒指",introduce:"法力加成 +3"},{url:"resource/panel/heros_goods/goods04.png",name:"斗篷",introduce:"魔法抗性 +3"},{url:"resource/panel/heros_goods/goods05.png",name:"鹅毛笔",introduce:"法力加成 +5"},{url:"resource/panel/heros_goods/goods06.png",name:"血滴子",introduce:"嗜血加成 +3"},{url:"resource/panel/heros_goods/goods07.png",name:"屠龙刀",introduce:"力量加成 +3"}],t=new eui.ArrayCollection(e);this.list_goods.dataProvider=t,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){ScenesManger.Instance.OnGoHome()},this)},t}(Scenes);__reflect(Goods_Panel.prototype,"Goods_Panel");var Hero_Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/game/HeroPanel.exml",t}return __extends(t,e),t.prototype.onComplete=function(){var e=[{image:"resource/panel/heros_goods/heros01.png",name:"尹文婕林",introduce:"樱桃小丸子"},{image:"resource/panel/heros_goods/heros02.png",name:"尹文婕林",introduce:"樱桃小丸子"},{image:"resource/panel/heros_goods/heros03.png",name:"尹文婕林",introduce:"樱桃小丸子"},{image:"resource/panel/heros_goods/heros04.png",name:"尹文婕林",introduce:"樱桃小丸子"},{image:"resource/panel/heros_goods/heros05.png",name:"尹文婕林",introduce:"樱桃小丸子"},{image:"resource/panel/heros_goods/heros06.png",name:"尹文婕林",introduce:"樱桃小丸子"},{image:"resource/panel/heros_goods/heros07.png",name:"尹文婕林",introduce:"樱桃小丸子"}],t=new eui.ArrayCollection(e);this.heros.dataProvider=t;var n=[{url:"resource/panel/profile/mbtnPlayer.png"},{url:"resource/panel/profile/mbtnHero.png"},{url:"resource/panel/profile/mbtnGoods.png"},{url:"resource/panel/profile/mbtnAbout.png"}],r=new eui.ArrayCollection(n);this.BtuList.dataProvider=r,this.confirm.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onConfirmBegin,this),this.confirm.addEventListener(egret.TouchEvent.TOUCH_END,this.onConfirmEnd,this),this["return"].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onConfirmBegin,this),this["return"].addEventListener(egret.TouchEvent.TOUCH_TAP,function(){ScenesManger.Instance.OnGoHome()},this),this["return"].addEventListener(egret.TouchEvent.TOUCH_END,this.onConfirmEnd,this)},t.prototype.onConfirmBegin=function(e){var t=e.target;t.scaleX=t.scaleY+=.1},t.prototype.onConfirmEnd=function(e){var t=e.target;t.scaleX=t.scaleY-=.1},t}(Scenes);__reflect(Hero_Panel.prototype,"Hero_Panel");var Player_Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/PlayerPanel.exml",t}return __extends(t,e),t.prototype.onComplete=function(){this.fit.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onFitClick,this),this.fit.addEventListener(egret.TouchEvent.TOUCH_END,this.onFitEnd,this),this.intensify.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onFitClick,this),this.intensify.addEventListener(egret.TouchEvent.TOUCH_END,this.onFitEnd,this),this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){ScenesManger.Instance.OnGoHome()},this);var e=[{image:"resource/panel/profile/skillIcon01.png",name:"旋龙幻杀"},{image:"resource/panel/profile/skillIcon02.png",name:"魔魂天咒"},{image:"resource/panel/profile/skillIcon03.png",name:"天魔舞"},{image:"resource/panel/profile/skillIcon04.png",name:"痴情咒"},{image:"resource/panel/profile/skillIcon05.png",name:"吴文姬"},{image:"resource/panel/profile/skillIcon06.png",name:"霸天虐杀"},{image:"resource/panel/profile/skillIcon07.png",name:"灭魂狂萧"}],t=new eui.ArrayCollection(e);this.equips.dataProvider=t},t.prototype.onFitClick=function(e){var t=e.target;t.scaleX=t.scaleY+=.2},t.prototype.onFitEnd=function(e){var t=e.target;t.scaleX=t.scaleY-=.2},t}(Scenes);__reflect(Player_Panel.prototype,"Player_Panel");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function r(r){t.call(n,r,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?r(o):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ScenesManger=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.OnChangeScenes=function(e){this.curretScenes&&(this.rootScenes.removeChild(this.curretScenes),this.curretScenes=null),this.rootScenes.addChild(e),this.curretScenes=e},e.prototype.OnGoHome=function(){this.rootScenes.removeChild(this.curretScenes),this.curretScenes=null},e.prototype.clearSelected=function(){var e=new UI_Panel;e.AddArr();for(var t=0;t<e.btusList.length;t++)console.log(e.btusList[t])},e}();__reflect(ScenesManger.prototype,"ScenesManger");var UI_Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/game/UIPanel.exml",t}return __extends(t,e),Object.defineProperty(t,"Instance",{get:function(){return null==t.instance&&(t.instance=new t),t.instance},enumerable:!0,configurable:!0}),t.prototype.AddArr=function(){this.btusList=[this.tog_player,this.tog_hero,this.tog_goods,this.tog_about];for(var e=0;e<this.btusList.length;e++)this.btusList[e].selected=!1},t.prototype.onComplete=function(){this.AddArr();for(var e=0;e<this.btusList.length;e++)this.btusList[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnBtuClick,this)},t.prototype.OnBtuClick=function(e){for(var t=e.target,n=0;n<this.btusList.length;n++)this.btusList[n].selected=t==this.btusList[n];switch(t.name){case"player":var r=new Player_Panel;ScenesManger.Instance.OnChangeScenes(r);break;case"hero":var o=new Hero_Panel;ScenesManger.Instance.OnChangeScenes(o);break;case"goods":var i=new Goods_Panel;ScenesManger.Instance.OnChangeScenes(i);break;case"about":var s=new About_Panel;ScenesManger.Instance.OnChangeScenes(s)}this.setChildIndex(this.group_btns,this.numChildren)},t}(Scenes);__reflect(UI_Panel.prototype,"UI_Panel");